<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Resources - ami-preservation</title> <link rel="shortcut icon" href="http://localhost:4000/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="http://localhost:4000/assets/css/just-the-docs.css"> <script type="text/javascript" src="http://localhost:4000/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="http://localhost:4000/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Resources | ami-preservation</title> <meta name="generator" content="Jekyll v3.8.5" /> <meta property="og:title" content="Resources" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Overview and instructions for NYPL’s Preservation of Audio and Moving Image quality control workflow" /> <meta property="og:description" content="Overview and instructions for NYPL’s Preservation of Audio and Moving Image quality control workflow" /> <link rel="canonical" href="http://localhost:4000/resources/resources.html" /> <meta property="og:url" content="http://localhost:4000/resources/resources.html" /> <meta property="og:site_name" content="ami-preservation" /> <script type="application/ld+json"> {"description":"Overview and instructions for NYPL’s Preservation of Audio and Moving Image quality control workflow","@type":"WebPage","url":"http://localhost:4000/resources/resources.html","headline":"Resources","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="link" viewBox="0 0 16 16"> <title>Link</title> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path> </symbol> </svg> <div class="page-wrap"> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000" class="site-title lh-tight"> ami-preservation </a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button> </div> <div class="navigation main-nav js-main-nav"> <nav role="navigation" aria-label="Main navigation"> <ul class="navigation-list"><li class="navigation-list-item"><a href="http://localhost:4000/shipping/shipping.html" class="navigation-list-link">AMI Shipping</a></li><li class="navigation-list-item"><a href="http://localhost:4000/filmAssessment/film-assessment.html" class="navigation-list-link">Film Assessment</a></li><li class="navigation-list-item"><a href="http://localhost:4000/" class="navigation-list-link">Audio and Moving Image Preservation Documentation Portal</a></li><li class="navigation-list-item"><a href="http://localhost:4000/pamiDB/pami-database.html" class="navigation-list-link">PAMI Database</a></li><li class="navigation-list-item"><a href="http://localhost:4000/projectAdmin/project-admin.html" class="navigation-list-link">Project Administration</a></li><li class="navigation-list-item"><a href="http://localhost:4000/projectAdmin/project-workflow.html" class="navigation-list-link">Project Workflow</a></li><li class="navigation-list-item"><a href="http://localhost:4000/inHouseDigitization/ami-labs.html" class="navigation-list-link">Audio</a></li><li class="navigation-list-item"><a href="http://localhost:4000/qualityControl/quality-control.html" class="navigation-list-link">Shipment Intake &amp; QC Cheat-Sheet</a></li><li class="navigation-list-item active"><a href="http://localhost:4000/resources/resources.html" class="navigation-list-link active">Resources</a></li><li class="navigation-list-item"><a href="http://localhost:4000/contractDigitization/contract-digitization.html" class="navigation-list-link">Contract Digitization</a></li></ul> </nav> </div> <footer class="site-footer"> <p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p> </footer> </div> <div class="main-content-wrap js-main-content" tabindex="0"> <div class="main-content"> <div class="page-header js-page-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search ami-preservation" aria-label="Search ami-preservation" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg> </div> <div class="js-search-results search-results-wrap"></div> </div> </div> <div class="page"> <div id="main-content" class="page-content" role="main"> <h1 id="resources"> <a href="#resources" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Resources </h1> <h2 id="packages-and-software"> <a href="#packages-and-software" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Packages and Software </h2> <p><strong>NOTE: Be aware of where on your computer you are installing scripts. If you are not familiar with command line tools and usage, please ask for help before installing anything.</strong></p> <ul> <li>Download Microsoft Office / Open Office</li> <li>Applications: <ul> <li>Atom</li> <li>Firefox</li> <li>Chrome</li> <li><a href="https://brew.sh/">Homebrew</a></li> </ul> </li> <li>MediaInfo: <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> brew install mediainfo
</code></pre></div> </div> </li> <li>Git: <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> brew install git
</code></pre></div> </div> </li> <li>ffmpeg - install with flags listed below: <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> brew install ffmpeg --with-sdl2 --with-freetype --with-openjpeg --with-x265 --with-rubberband --with-tesseract
</code></pre></div> </div> <ul> <li>Good instructions on Reto Kramer’s <a href="https://avpres.net/FFmpeg/">website.</a></li> </ul> </li> <li>Pip: <ul> <li>First, check that you have pip installed: <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> pip --version
</code></pre></div> </div> </li> <li>If you get a version number, you can install BagIt Python (skip the pip instructions below and move on to installing bagit). If you get a message that pip isn’t installed, install pip: <ul> <li>Go to https://pip.pypa.io/en/stable/installing/</li> <li>Click on the hyperlinked “get-pip.py”.</li> <li>A tab should open that looks like a text file – save the page (Command-S) to a specific place on your computer (Desktop / Downloads / Home folder etc.).</li> <li>In Terminal, <code class="language-plaintext highlighter-rouge">cd</code> into the directory where you downloaded the script.</li> <li>Run the script: <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python path/to/get-pip.py
</code></pre></div> </div> </li> <li>Pip should now be installed.</li> </ul> </li> </ul> </li> <li>Python 2.7.12 (for bagit) &amp; python3 (for other things) <ul> <li>Go to https://www.python.org/downloads/mac-osx/ and install Python 2.7.12.</li> <li>Then install: <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Brew install python3
</code></pre></div> </div> </li> <li>Note: this also installs pip3, which you need in order to install python3 scripts below)</li> </ul> </li> <li>Bagit Python (install both) <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> pip install bagit
</code></pre></div> </div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> pip3 install bagit
</code></pre></div> </div> </li> <li>Pymediainfo <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> pip3 install pymediainfo
</code></pre></div> </div> </li> <li>Mediaconch &amp; Mediaconch CLI <ul> <li>Install the <a href="https://mediaarea.net/MediaConch/">Media Conch GUI</a> then: <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> brew install mediaconch
</code></pre></div> </div> </li> </ul> </li> <li>QC Tools <ul> <li>Go to https://bavc.org/preserve-media/preservation-tools</li> <li>QCtools reports / QCparse - not in use yet, but have been tested; are installed on c03 corner Mac <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> brew install qcli
</code></pre></div> </div> <p>=======</p> </li> </ul> </li> </ul> <h2 id="scripts-and-repos"> <a href="#scripts-and-repos" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Scripts and Repos </h2> <h3 id="github-repos"> <a href="#github-repos" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Github Repos </h3> <h4 id="ami-metadata"> <a href="#ami-metadata" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> <strong><a href="https://github.com/NYPL/ami-metadata">ami-metadata</a></strong> </h4> <ul> <li>Dependencies: <ul> <li>Npm &amp; ajv: <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew install npm
</code></pre></div> </div> </li> <li>Then, in Terminal: <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install -g ajv-cli
</code></pre></div> </div> </li> </ul> </li> <li>For json schema validation &amp; development. See usage instructions on GitHub.</li> </ul> <h4 id="ami-tools"> <a href="#ami-tools" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> <strong><a href="https://github.com/NYPL/ami-tools">ami-tools</a></strong> </h4> <p><em>Many different scripts, mostly for bagit-related repair &amp; validation tasks</em></p> <ul> <li><code class="language-plaintext highlighter-rouge">pip3 install .</code> (Be sure to include the “.”) This should automatically install the following dependencies (but here they are just in case): <ul> <li><code class="language-plaintext highlighter-rouge">tqdm</code></li> <li><code class="language-plaintext highlighter-rouge">xlrd</code></li> <li><code class="language-plaintext highlighter-rouge">Openpyxl</code></li> </ul> </li> <li><code class="language-plaintext highlighter-rouge">Survey_drive.py</code> This will create a series of reports on a specified drive: <ul> <li>Mount drive</li> <li>Open Terminal</li> <li><code class="language-plaintext highlighter-rouge">cd ami-tools</code></li> <li><code class="language-plaintext highlighter-rouge">python3 path/to/survey_drive.py -d path/to/Volume -o path/to/location_for_Reports</code></li> </ul> </li> </ul> <h4 id="make_bagssh"> <a href="#make_bagssh" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> <strong>make_bags.sh</strong> </h4> <p>For making a lot of directories into bags overnight.</p> <ul> <li>https://github.com/genfhk/ghk-sandbox/tree/master/make_bags</li> <li>Usage: <ul> <li><code class="language-plaintext highlighter-rouge">cd path/to/dir/of/bags</code></li> <li><code class="language-plaintext highlighter-rouge">/path/to/script (enter)</code></li> </ul> </li> <li><em>Note: Be sure to update the log-drop location in this script for your own machine, or it won’t work (until new version merged in ami-tools repo).</em></li> </ul> <h4 id="check_mediainfopy"> <a href="#check_mediainfopy" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> <strong>check_mediainfo.py</strong> </h4> <ul> <li> <p>Usage:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> python3 /path/to/check_mediainfo.py -d /path/to/dir/with/bags -f _filename.mp4
</code></pre></div> </div> </li> <li> <p>Currently this script is set to check files that have fewer than 2 audio channels (as reported by mediainfo), but this may be changed, enhanced for other fields / values, etc.</p> </li> </ul> <h4 id="repair_bagpy--fix_baginfopy"> <a href="#repair_bagpy--fix_baginfopy" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> <strong>repair_bag.py / Fix_baginfo.py</strong> </h4> <p>Use Case: Adding metadata file to a single Bag and repairing the manifests</p> <ol> <li>Add completed metadata file to the bag in the appropriate directory</li> <li> <p><em>Optional</em></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Python3 path/to/repair_bags.py -b /path/to/bag --deletefiles
</code></pre></div> </div> </li> <li>(this will delete the .DS_Store ‘s)</li> <li> <p>Run <code class="language-plaintext highlighter-rouge">repair_bags.py</code>:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Python3 path/to/repair_bags.py -b /path/to/bag --addfiles
</code></pre></div> </div> <p>(this will update the manifest with any new files)</p> </li> <li> <p>Check if bag is complete using bagger or <code class="language-plaintext highlighter-rouge">validate_bags.py</code> (only checks bag ‘completeness’ - not checksum validation, but theoretically should be good enough):</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Python3 path/to/validate_ami_bags.py -b /path/to/bag
</code></pre></div> </div> <p><em>Note: The above scripts can be used for checking directories of bags or single bags, by using <code class="language-plaintext highlighter-rouge">-d</code> for directories and specifying the parent directory containing the bags, or <code class="language-plaintext highlighter-rouge">-b</code> for bag and specifying just the bag directory.</em></p> </li> </ol> <h3 id="ffmpeg"> <a href="#ffmpeg" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> ffmpeg </h3> <h4 id="audio"> <a href="#audio" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> <strong>Audio</strong> </h4> <ul> <li>In-house Audio Edit Master &gt; AWS Audio Edit Master / Service Copy (audio as mp4): <ul> <li><em>[individual file version]</em>: <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ffmpeg -i path/to/input_em.wav -c:a aac -b:a 320k -dither_method rectangular -ar 44100 path/to/name-of-output_em.mp4
</code></pre></div> </div> </li> <li><em>[directory of files version]</em>: <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>for file in *wav ; do ffmpeg -i "$file" -c:a aac -b:a 320k -dither_method rectangular -ar 44100 "${file%.*}.mp4" ; done
</code></pre></div> </div> </li> </ul> </li> </ul> <h3 id="mediaconch"> <a href="#mediaconch" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> MediaConch </h3> <ul> <li><strong>Option A (Mac only):</strong> Use MediaConch CLI to ensure that files meet NYPL specifications <ul> <li>Check that MediaConch CLI is installed. If it is not, install it.</li> <li>If you’ve cloned the ami-tools Github repo, you can find all of NYPL’s MediaConch Policies within the ami-files directory. Otherwise, they can be found on ICC.</li> <li>Basic terminology is to use the “find” command to locate the type of file you’ll be cross-checking against the policy (.mkv, .wav, etc.), and then applying the relevant MediaConch policy. Open Terminal to run the following commands for the specific media type &amp; file roles you are inspecting.</li> <li>The CLI report is output as a .csv file. Move this file into the log folder for the batch you are reviewing.</li> <li>The MediaConch GUI should be downloaded for checking individual files and for general purposes.</li> </ul> </li> </ul> <h4 id="mediaconch-command-line"> <a href="#mediaconch-command-line" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> MediaConch Command-line </h4> <div class="table-wrapper"><table> <thead> <tr> <th>Media Type</th> <th style="text-align: center">File Role</th> <th style="text-align: left">Commands</th> </tr> </thead> <tbody> <tr> <td>Video</td> <td style="text-align: center">PM</td> <td style="text-align: left">&lt;ul&gt; &lt;li&gt; <code class="language-plaintext highlighter-rouge">cd /Volume/DRIVEID/</code> &lt;/ul&gt; &lt;/li&gt; &lt;ul&gt; &lt;li&gt; <code class="language-plaintext highlighter-rouge">find ./ -name "*.mkv" -exec mediaconch -p path/to/video_PM_policy.xml "{}" \; &gt; /path/to/ICC/DRIVEID_Medicaconch_PMs.csv</code> &lt;/ul&gt; &lt;/li&gt;</td> </tr> <tr> <td>Video</td> <td style="text-align: center">SC</td> <td style="text-align: left">&lt;ul&gt; &lt;li&gt; <code class="language-plaintext highlighter-rouge">cd /Volume/DRIVEID/</code> &lt;/ul&gt; &lt;/li&gt; &lt;ul&gt; &lt;li&gt; <code class="language-plaintext highlighter-rouge">find ./ -name "*.mp4" -exec mediaconch -p path/to/video_SC_policy.xml "{}" \; &gt; path/to/ICC/DRIVEID_Medicaconch_SCs.csv</code> &lt;/ul&gt; &lt;/li&gt;</td> </tr> <tr> <td>Audio</td> <td style="text-align: center">PM</td> <td style="text-align: left">&lt;ul&gt; &lt;li&gt; <code class="language-plaintext highlighter-rouge">cd /Volume/DRIVEID/</code> &lt;/ul&gt; &lt;/li&gt; &lt;ul&gt; &lt;li&gt; <code class="language-plaintext highlighter-rouge">find ./ -name "*_pm.wav" -exec mediaconch -p path/to/audio_PM_policy.xml "{}" \; &gt; path/to/ICC/DRIVEID_Medicaconch_PMs.csv</code> &lt;/ul&gt; &lt;/li&gt;</td> </tr> <tr> <td>Audio</td> <td style="text-align: center">EM</td> <td style="text-align: left">&lt;ul&gt; &lt;li&gt; <code class="language-plaintext highlighter-rouge">cd /Volume/DRIVEID/</code> &lt;/ul&gt; &lt;/li&gt; &lt;ul&gt; &lt;li&gt; <code class="language-plaintext highlighter-rouge">find ./ -name "*_em.wav" -exec mediaconch -p path/to/audio_EM_policy.xml "{}" \; &gt; path/to/ICC/DRIVEID_Medicaconch_EMs.csv</code> &lt;/ul&gt; &lt;/li&gt;</td> </tr> </tbody> </table></div> <ul> <li><strong>Option B:</strong> Use MediaConch GUI to check a selection of Preservation Master files, or a single file, against the NYPL PAMI Preservation Master policy.Under “Check Files”: <ul> <li>Select the NYPL Policy from the drop down list for the appropriate media type you are inspecting (analog / digital, audio / video)</li> <li>Select Display MediaConch HTML</li> <li>Choose Files: Select multiple PMs all at once &gt; done</li> <li>Click “Check Files” on the ‘Checker’ interface</li> <li>Adjust the number of items viewed in the list to 100 (upper left hand corner of results) <h4 id="mediaconch-failures-procedure"> <a href="#mediaconch-failures-procedure" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> MediaConch Failures Procedure </h4> </li> <li>CLI: <em>TBD</em> <ul> <li>Review the JSON metadata for the files to see if there are attributes of the file or source object that would require you to use a different policy for those specific Preservation Master files.</li> <li>If there definitely is something wrong with the file, if it is critical and appears systematic, notify vendor immediately to prevent creation of more bad files. If it seems like a one-off, make note of it in the log and save for the full QC report on the entire shipment/invoice.</li> </ul> </li> <li>GUI: <ul> <li>Under “Results”, VIEW the report by clicking the <code class="language-plaintext highlighter-rouge">[[SYMBOL GOES HERE]]</code> symbol in the column under “Policy”. You can display the report in different formats using the “Display” drop down menu provided in the viewing window. MediaConch Text / HTML are easiest on the eyes.</li> </ul> </li> </ul> </li> </ul> <p><strong>MEDIACONCH SCREENSHOT GOES HERE</strong></p> <p><em>Media Conch GUI, with PAMI Policy &amp; “Download policy report” bubble showing.</em></p> <ul> <li><em>Note on MediaConch limitations &amp; Interlacing</em> MediaInfo does not always adequately report all characteristics of a file (or may report them incorrectly). If a file fails, review the report to see why it failed. Investigate and determine whether there is actually something wrong with the file, or just a flaw / glitch with the software / policy.</li> <li>For more accurate confirmation of interlacing / Scan Type, use Ffmpeg - run the following command, which checks the field dominance of the first 1000 frames of video: <code class="language-plaintext highlighter-rouge">ffmpeg -filter:v idet -frames:v 1000 -an -f rawvideo -y /dev/null -ipath/to/file.mov</code></li> </ul> <h3 id="generating-a-qc-list"> <a href="#generating-a-qc-list" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Generating a QC list </h3> <ul> <li><code class="language-plaintext highlighter-rouge">Cd /path/to/Audio</code> or Video directory</li> <li><code class="language-plaintext highlighter-rouge">ls Audio/Video &amp;gt; path/to/log/folder/batchID_assetlist.csv</code></li> <li>[Import csv into google sheets qc log created from template:] <ul> <li>The QC template has built-in formulas in the “list” tab. <ul> <li>Navigate to the “asset list” .csv file for the drive you are QCing.</li> <li>Navigate to the “list” tab in your QC log</li> <li><strong>Select the proper cell for either Audio or Video media that you are importing data for (i.e. if you’re importing an AUDIO asset list, select the audio cell as instructed in the log).</strong> <em>The two cells have different formulas applied for the different quotas we are meeting for audio vs. video data (5% audio vs. 10% video)</em></li> <li>Once you’ve selected the cell, import <em>assetlist.csv</em> into A1 of the “list” tab of the existing Google Sheets QC log (File&gt;Import&gt;Upload a file) <ul> <li>Select <strong>“Replace contents starting with selected cell”</strong> and <strong>“comma separated”</strong> when the dialog window appears (because you are importing a .csv)</li> </ul> </li> <li>The line items will then be imported into the sheet, and the column next to it will generate a filtered list. This is your spot checking list.</li> <li>Copy/Paste Special&gt;”Paste values only” the list of filtered Primary IDs into the “QClog” tab, in the Primary ID column. Do this for one media type at a time. (i.e. if there are both audio and video assets on a single drive, first copy the audio items list, then copy the video items list below it.</li> </ul> </li> <li>Proceed with spot checking.</li> </ul> </li> </ul> <h3 id="content-inspection"> <a href="#content-inspection" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Content Inspection </h3> <h4 id="general-overview"> <a href="#general-overview" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> General Overview </h4> <ul> <li>Software requirements: <ul> <li>Text editor (Atom, Text Edit, Notepad all equally fine)</li> <li>VLC</li> </ul> </li> <li>Content inspection can be completed either on ICC or on the drive. <ul> <li><strong>On ICC:</strong> <em>make sure your machine is not going to create DS_Store files or Thumbs.db files inside bags.</em> <ul> <li>Locate the directory that contains batch to QC in the 3_Ready_To_QC folder, if assigned by MPA.</li> <li>Follow the below instructions (skip “Mount Read Only” section)</li> </ul> </li> <li><strong>On Hard Drive:</strong> <em>Mount Drive Read Only</em> before opening any directories, and follow the below instructions</li> </ul> </li> </ul> <h4 id="formatting-hard-drives-exfat"> <a href="#formatting-hard-drives-exfat" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Formatting Hard Drives exFAT </h4> <p>See: https://joshuatj.com/2015/05/13/how-to-format-your-hard-drive-hdd-for-mac-os-x-compatibility-with-the-correct-exfat-allocation-unit-size/</p> <ul> <li>allocation unit size: 128kb <h4 id="spot-checking-content--json"> <a href="#spot-checking-content--json" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Spot Checking Content &amp; JSON </h4> <ul> <li>Open and inspect JSON file using a text-editor (Atom / Notepad / Text Edit etc.) to ensure that: <ul> <li>There is one JSON file for each digital asset created from a physical object</li> <li>JSON files are named properly</li> <li>All elements are properly structured</li> <li>All fields contain values (except “bibliographic date”, which is allowed to be left empty).</li> <li>Technical characteristics/configurations noted in JSON make sense for what you are hearing / seeing. <em>Note:</em> if content quality is questionable, make sure to check whether item was cleaned/baked/in poor condition. This will give perspective on the quality of the file.</li> </ul> </li> </ul> </li> <li>Check files for anomalies <ul> <li> <p>Manually check 30sec sections at beginning, middle, end of each file.</p> <ul> <li>Things to consider when working with audio files: <ul> <li>No 5 second overlap between heads and tails of Parts or Regions</li> <li>Reversed content that was not transferred as a separate region</li> <li>Tip: <em>For a quick check of the entire drive for objects with Regions, grep the directory for “p01” or “r01”</em></li> </ul> </li> <li>Things to consider when working with video files: <ul> <li>Service Copy plays and does not contain transcoding errors / is not corrupt.</li> </ul> </li> </ul> </li> </ul> </li> </ul> <h4 id="logging-qc-failures--flags"> <a href="#logging-qc-failures--flags" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Logging QC Failures &amp; Flags </h4> <p>Use the Definitions below to review and mark-off the items listed in the QC log.</p> <ul> <li><strong>Be as concise as possible when noting questions and errors, so MPA does not have to double-check or clarify with you before compiling notes for Vendors.</strong></li> <li>Feel free to add rows for additional assets if you encounter more errors when troubleshooting. Rows are ‘per bag’.</li> <li>When QC is complete, send an email to notify MPA / Asst Mgr. that there are some items to review. They will compile all notes for a shipment into a single email and communicate to the vendor. <strong>Note:</strong> Try to troubleshoot errors to make sure you’re not missing something about the nature of the tape that would impact the quality or structure of the file or metadata, e.g. if it was a very poor quality tape and they baked it twice and cleaned it and tried it on multiple machines.</li> </ul> <h5 id="definitions"> <a href="#definitions" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Definitions </h5> <ul> <li><em>Question:</em> A question which will help determine whether an item should be reworked or not. Example: <ul> <li>Freeze frame at the head of the Preservation Master, not noted in the JSON signalNotes. Is this freeze-frame recorded in on-tape?</li> </ul> </li> <li><em>Flag:</em> A moderate or minor error that is concerning but that DOES NOT require rework, but does require. Examples: <ul> <li>An audio Edit Master was not levelled-out. The volume level is the same as the Preservation Master, which is lower than the ideal listening volume.</li> <li>Audio channels in a video Service Copy were not mixed down the audio from the single channel audible in the Preservation Master, so Service Copy only has one channel of audible content.</li> </ul> </li> <li><em>Fail:</em> A severe, systematic, or critical error that you think will most likely require retransfer, updating of metadata, and/or rebagging. Examples: <ul> <li>The metadata for a video asset describes audible content, but the Preservation Master and Service Copy do not have audio.</li> <li>An audio asset appears to sound entirely backwards (reversed content on a single face -f01 -was not split out into a separate Face -f02-)</li> </ul> </li> <li><em>Pass</em> No errors, or any errors listed in the notes are inconsequential, inherent to tape, or only included as supplemental information for future cataloger inquiries. <h5 id="urgent--systematic-errors"> <a href="#urgent--systematic-errors" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Urgent / Systematic errors </h5> </li> <li>If you notice that there is something consistently and terribly wrong with many files in a row, please notify MPA / Asst. Mgr immediately so we can notify vendor and avoid replicating the error in future deliverables ASAP. <em>(e.g. the ’barcode’ field in the JSON files is consistently “000000000”, or the ‘duration’ values are all wrong, or every value for ‘filename’ is the same across an entire batch.)</em></li> </ul> <h4 id="media-ingest-preparation"> <a href="#media-ingest-preparation" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Media Ingest Preparation </h4> <ul> <li>Make sure all logs are stored on ICC</li> <li>Update STATS 3</li> <li>Move Trello card to proper list - Passed QC / Hold for Vendor Response (if flags / fails)</li> <li>Store drive on proper shelf in C10: <ul> <li>Shelf 1 = there is a “Passed QC” level in here</li> <li>Shelf 9 = there is a “Hold for Vendor response” level in here.</li> <li><em>Alternatively, give the drive back to the MPA / Asst. Mgr. or leave it on their desk and send an email.</em></li> </ul> </li> </ul> <p>[QC complete! - if there are failures, all failures in an entire shipment will be combined and sent as a single email; report them to the MPA]</p> <h2 id="ds_store-files"> <a href="#ds_store-files" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> .DS_Store Files </h2> <h4 id="prevent-creation-of-ds_store-files-on-network-shares"> <a href="#prevent-creation-of-ds_store-files-on-network-shares" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Prevent creation of .DS_Store files on network shares </h4> <p><strong>Run in Terminal:</strong></p> <ul> <li><code class="language-plaintext highlighter-rouge">defaults write com.apple.desktopservices DSDontWriteNetworkStores -boolean true</code></li> </ul> <p><strong>Run to check if it worked:</strong></p> <ul> <li> <p><code class="language-plaintext highlighter-rouge">defaults read com.apple.desktopservices DSDontWriteNetworkStores</code></p> <p>Should return “true” or “1”</p> </li> </ul> <h4 id="remove-ds_store-files"> <a href="#remove-ds_store-files" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Remove .DS_Store files </h4> <ul> <li><code class="language-plaintext highlighter-rouge">cd [path to volume you want to clean] [enter]</code></li> <li> <p><code class="language-plaintext highlighter-rouge">find . -name '.DS_Store' -type f -delete [enter]</code></p> <p><em>Volume must be made writeable (be sure to put back to Read Only!), and you must not have anything in it selected in Finder - best not to open it in finder at all.</em></p> </li> <li> <p>Disable .DS_Store files on MacOS El Capitan:</p> <p>http://pixelcog.com/blog/2016/disable-ds_store-in-el-capitan/</p> </li> <li> <p>Prevent creation of .DS_Store files on network shares:</p> <p><code class="language-plaintext highlighter-rouge">defaults write com.apple.desktopservices DSDontWriteNetworkStores -boolean true</code></p> </li> <li> <p>Check if it worked:</p> <p><code class="language-plaintext highlighter-rouge">defaults read com.apple.desktopservices DSDontWriteNetworkStores</code></p> <p>(Should return “true” or “1”)</p> </li> </ul> <h2 id="transcoding-and-packaging-for-in-house-video-files"> <a href="#transcoding-and-packaging-for-in-house-video-files" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Transcoding and Packaging for In-House Video Files </h2> <p>A transcoding and packaging bash script (NYPLpackage.sh) that does it all (transcodes MKVs, MP4s, generates QCTools Reports, Framemd5 checksums, and packages all in the appropriate directory structure) is around for general use, but occasionally you may need to transcode single files or small groups of files. The following commands will help:</p> <p><strong>To make an MKV from an uncompressed source:</strong></p> <ul> <li> <p>NTSC</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ffmpeg -i input_file -map 0 -dn -c:v ffv1 -level 3 -coder 1 -context 1 -g 1 -slicecrc 1 -slices 24 -field_order bt -vf setfield=bff,setdar=4/3 -color_primaries smpte170m -color_range tv -color_trc bt709 -colorspace smpte170m -c:a flac output_file.mkv
</code></pre></div> </div> </li> <li> <p>PAL</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ffmpeg -i input_file -map 0 -dn -c:v ffv1 -level 3 -coder 1 -context 1 -g 1 -slicecrc 1 -slices 24 -field_order tb -vf setfield=tff,setdar=4/3 -color_primaries bt470bg -color_range tv -color_trc bt709 -colorspace bt470bg -c:a flac output_file.mkv
</code></pre></div> </div> </li> </ul> <p><strong>Batch version:</strong></p> <ul> <li> <p>NTSC:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  for file in *.mov ; do ffmpeg -i "$file" -map 0 -dn -c:v ffv1 -level 3 -coder 1 -context 1 -g 1 -slicecrc 1 -slices 24 -field_order bt -vf setfield=bff,setdar=4/3 -color_primaries smpte170m -color_range tv -color_trc bt709 -colorspace smpte170m -c:a flac "${file%.*}.mkv" ; done
</code></pre></div> </div> </li> <li> <p>PAL</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  for file in *.mov ; do ffmpeg -i "$file" -map 0 -dn -c:v ffv1 -level 3 -coder 1 -context 1 -g 1 -slicecrc 1 -slices 24 -field_order tb -vf setfield=tff,setdar=4/3 -color_primaries bt470bg -color_range tv -color_trc bt709 -colorspace bt470bg -c:a flac "${file%.*}.mkv" ; done
</code></pre></div> </div> </li> </ul> <p><strong>To make an MP4:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  ffmpeg -i input_file -map 0:a -map 0:v -c:v libx264 -movflags faststart -pix_fmt yuv420p -b:v 3500000 -bufsize 1750000 -maxrate 3500000 -vf yadif -c:a aac -strict -2 -b:a 320000 -ar 48000 -aspect 4:3 output_file.mp4
</code></pre></div></div> <p><strong>Batch version:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  for file in *.mkv ; do ffmpeg -i "$file" -map 0:a -map 0:v -c:v libx264 -movflags faststart -pix_fmt yuv420p -b:v 3500000 -bufsize 1750000 -maxrate 3500000 -vf yadif -c:a aac -strict -2 -b:a 320000 -ar 48000 -aspect 4:3 "${file%.*}_sc.mp4" ; done 
</code></pre></div></div> <p><strong>Batch version w/ pan left to center:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>for file in *mkv ; do ffmpeg -i "$file" -c:v libx264 -movflags faststart -filter_complex '[0:v]yadif[outv];[0:a]pan=stereo|c0=c0|c1=c0[outa]' -map '[outv]' -map '[outa]' -pix_fmt yuv420p -b:v 3500000 -bufsize 1750000 -maxrate 3500000 -c:a aac -strict -2 -b:a 320000 -ar 48000 -aspect 4:3 "${file%.*}_sc.mp4" ; done 
</code></pre></div></div> <p><strong>Batch version w/ pan right to center:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>for file in *mkv ; do ffmpeg -i "$file" -c:v libx264 -movflags faststart -filter_complex '[0:v]yadif[outv];[0:a]pan=stereo|c0=c1|c1=c1[outa]' -map '[outv]' -map '[outa]' -pix_fmt yuv420p -b:v 3500000 -bufsize 1750000 -maxrate 3500000 -c:a aac -strict -2 -b:a 320000 -ar 48000 -aspect 4:3 "${file%.*}_sc.mp4" ; done 
</code></pre></div></div> <p><strong>To make a Prores 422 HQ from an uncompressed or lossless source:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ffmpeg -i input_file -map 0:a -map 0:v -c:v prores -profile:v 3 -vf yadif -c:a copy output_file.mov
</code></pre></div></div> <p><strong>Batch version:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>for file in *.mkv ; do ffmpeg -i "$file" -map 0:a -map 0:v -c:v prores -profile:v 3 -vf yadif -c:a pcm_s24le "${file%.*}_prores.mov" ; done
</code></pre></div></div> <p><strong>Rsyncing JSON and JPEGS:</strong></p> <p><code class="language-plaintext highlighter-rouge">rsync -rtv /DRIVEID/*/*/data/*/*.json /path/to/destination</code></p> <p><code class="language-plaintext highlighter-rouge">rsync -rtv /DRIVEID/*/*/data/*/*.jpg /path/to/destination</code></p> <p>Occasionally, this will result in an “argument list too long” error (mostly a problem with audio drives, which can contain thousands and thousands of files). In these cases, the following will work:</p> <p><code class="language-plaintext highlighter-rouge">find DRIVEID/ -name '*.json' -exec rsync -rtv --progress {} /path/to/destination ';'</code></p> <p><code class="language-plaintext highlighter-rouge">find DRIVEID/ -name '*.jpg' -exec rsync -rtv --progress {} /path/to/destination ';'</code></p> <h2 id="mpv"> <a href="#mpv" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> MPV </h2> <p>Install mpv: https://mpv.io/installation/</p> <h2 id="wget"> <a href="#wget" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> wget </h2> <p>For FTP and other types of file transfer</p> <ul> <li> <p>Brew install wget:</p> <p><code class="language-plaintext highlighter-rouge">wget -r 'ftp://username:password@ip/directoryname'</code></p> </li> <li> <p>Directory is cloned onto your current working directory</p> </li> </ul> <h2 id="formatting-harddrives"> <a href="#formatting-harddrives" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Formatting Harddrives </h2> <ul> <li> <p><code class="language-plaintext highlighter-rouge">Brew cask install fuse</code></p> </li> <li> <p><code class="language-plaintext highlighter-rouge">Brew install ntfs3g</code></p> </li> </ul> <h2 id="commands"> <a href="#commands" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Commands </h2> <p>The following commands come in handy when troubleshooting specific errors, json failures, or preparing a machine for doing QC work.</p> <h3 id="mounting-drives-read-only"> <a href="#mounting-drives-read-only" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Mounting Drives Read-Only </h3> <p>The most important step during QC.</p> <ul> <li>Open Terminal</li> <li>Open Disk Utility</li> <li>Plug in/turn on hard drive</li> <li>Unmount using Disk Utility (or using Terminal command ‘umount’)</li> <li>Make note of diskID: <ul> <li>In Disk utility, click “info” or select the drive on the list and type ‘command+i’ <ul> <li>or use Terminal command ‘list’</li> </ul> </li> </ul> </li> <li>In Terminal, type the following, where “diskID” = the diskID you just found (i.e. disk1s2): <ul> <li>Diskutil mount readOnly diskID</li> </ul> </li> <li>Your disk should be mounted read-only now</li> </ul> <h3 id="json-validation"> <a href="#json-validation" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> JSON Validation </h3> <ul> <li>Run the following command(s) in Terminal to check if JSON is valid against schema <ul> <li><code class="language-plaintext highlighter-rouge">cd path/to/ami-metadata</code></li> <li><code class="language-plaintext highlighter-rouge">ajv validate -s path/to/versions/#.#/schema/digitized.json -r "versions/#.#/schema/*.json" -d "dir_of_bags/*/data/*/*.json"</code></li> <li>Select entire output of validation and export as DRIVEID_jsonvalidationlog.txt into log folder</li> <li><code class="language-plaintext highlighter-rouge">grep -o -c -i -h -r invalid  path/to/ICC/Logs/Project/DRIVEID_jsonvalidationlog.txt</code></li> </ul> </li> <li><strong>JSON invalid?:</strong> <ul> <li>Run validation on individual failed files to retrieve specific errors and create a list to send failure report to vendor. <ul> <li>To check for further errors, you must copy the file, fix the first error on the copy version, and validate the copy to see if more errors pop up - the validator will fail a file at the first error it encounters and stop there.</li> </ul> </li> </ul> </li> </ul> <h3 id="creating-new-hdmanifests"> <a href="#creating-new-hdmanifests" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Creating New HDmanifests </h3> <p>These commands will create manifests for all files, excluding all subdirectories and BagIt related files. You can add/remove file types within the <code class="language-plaintext highlighter-rouge">-iname</code> flags to include or exclude other types.</p> <h4 id="create-a-new-hdmanifest-for-an-audio-directory"> <a href="#create-a-new-hdmanifest-for-an-audio-directory" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Create a new HDmanifest for an Audio directory </h4> <ul> <li><code class="language-plaintext highlighter-rouge">cd /Volumes/DRIVEID</code></li> <li><code class="language-plaintext highlighter-rouge">find Audio/ -type f \( -iname "*.wav" -or -iname "*.json" \) &gt; path/to/dest.csv</code></li> </ul> <h4 id="create-a-new-hdmanifest-for-an-video-directory"> <a href="#create-a-new-hdmanifest-for-an-video-directory" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Create a new HDmanifest for an Video directory </h4> <ul> <li><code class="language-plaintext highlighter-rouge">cd /Volumes/DRIVEID</code></li> <li><code class="language-plaintext highlighter-rouge">find Video/ -type f \( -iname "*.mkv" -or -iname "*.mp4" -or -iname "*.json" \) &gt; path/to/dest.csv</code></li> </ul> <h3 id="parsing-files-and-reports"> <a href="#parsing-files-and-reports" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Parsing Files and Reports </h3> <h4 id="move-json--jpgs"> <a href="#move-json--jpgs" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Move JSON / JPGs </h4> <ul> <li> <p><code class="language-plaintext highlighter-rouge">rsync -rtv /DRIVEID/*/data/*/*.json /path/to/destination</code></p> </li> <li> <p><code class="language-plaintext highlighter-rouge">rsync -rtv /DRIVEID/*/*/data/*/*.jpg /path/to/destination</code></p> </li> </ul> <p>Occasionally, this will result in an “argument list too long” error (mostly a problem with audio drives, which can contain thousands and thousands of files). In these cases, the following will work:</p> <ul> <li> <p><code class="language-plaintext highlighter-rouge">find DRIVEID/ -iname '*.json' -exec rsync -rtv --progress {} /path/to/destination ';'</code></p> </li> <li> <p><code class="language-plaintext highlighter-rouge">find DRIVEID/ -iname '*.jpg' -exec rsync -rtv --progress {} /path/to/destination ';'</code></p> </li> </ul> <h4 id="grep-json"> <a href="#grep-json" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Grep JSON </h4> <p>The Grep tool can be used for many things, including:</p> <ul> <li>Parsing the ‘Logs’ folder on ICC to find the drive that contains a certain Bag</li> <li>Performing mass fixes on specific recurring errors</li> <li>Identifying all files with a known error, to make a list of things to fix / rework</li> </ul> <p><code class="language-plaintext highlighter-rouge">grep -i -H -R "someString" Volumes/HardDrive/*/*/data/*/*.json</code></p> <p>OR</p> <p><code class="language-plaintext highlighter-rouge">Cd dir/of/bags/</code></p> <p><code class="language-plaintext highlighter-rouge">find . -name "*.json" | xargs grep "audio cassette digital"</code></p> <p><em>This recursively searches for specific text in a json file and returns the line of text as well as the filename and path containing the text. Use * to mark any directories that will have variable names (such as objects / bags)</em></p> <h4 id="grep-validation-logs"> <a href="#grep-validation-logs" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Grep Validation Logs </h4> <p>The following are examples for parsing the json validation log and bag validation log for <code class="language-plaintext highlighter-rouge">invalid</code> objects.</p> <ul> <li> <p><code class="language-plaintext highlighter-rouge">grep -i -H -R "invalid" path/to/jsonvalidationlog.txt</code></p> </li> <li> <p><code class="language-plaintext highlighter-rouge">grep -i -H -R "invalid" path/to/validationLogFile.log</code></p> </li> </ul> <h2 id="google-sheet-formulas"> <a href="#google-sheet-formulas" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Google Sheet formulas: </h2> <h3 id="return-contentvalue-after-nth-character-in-a-cell"> <a href="#return-contentvalue-after-nth-character-in-a-cell" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Return content/value after ‘nth’ character in a cell </h3> <p><code class="language-plaintext highlighter-rouge">=RIGHT(A1,LEN(A1)-5)</code> (where A1 is the source cell. Adjust number of characters from “-5” to match the number of characters you want to omit from new cell)</p> <h3 id="flag-items-that-arent-in-a-specified-range"> <a href="#flag-items-that-arent-in-a-specified-range" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Flag items that aren’t in a specified range </h3> <p>Insert the following formula next to a cell you’d like to confirm is in a given column. If the cell is not in the given column, it will return the value of that cell (which would enable you to create a filtered list of all items that show up as missing from the column). <code class="language-plaintext highlighter-rouge">=IF(COUNTIF($C:$C, $B4)=0, B4, "")</code></p> <h3 id="color-code-duplicates-in-a-range-of-columns"> <a href="#color-code-duplicates-in-a-range-of-columns" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Color-code duplicates in a range of columns </h3> <ul> <li>Select range of columns (this works best with a small rage, where there are very few columns to consider, like 2)</li> <li><code class="language-plaintext highlighter-rouge">ctrl-click</code> and select <code class="language-plaintext highlighter-rouge">conditional formatting</code> for just that range.</li> <li>Use custom formula below &amp; set desired color of cell / formatting (where A:B is the range - adjust for different ranges):</li> </ul> <p><code class="language-plaintext highlighter-rouge">=COUNTIF($A$1:$B$1031, INDIRECT(ADDRESS(ROW(), COLUMN(), 4))) &gt; 1</code></p> <ul> <li>Good for performing check-in of physical assets (to confirm that the original list of items has been scanned</li> <li>Finding duplicates between two lists, i.e. the DNC list from one batch to another to make sure projects aren’t getting mixed up</li> <li>Checking between a list of items that have been QC’d vs total items</li> </ul> <h3 id="creating-a-filtered-list-divided-by-a-number-for-10-20-etc"> <a href="#creating-a-filtered-list-divided-by-a-number-for-10-20-etc" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Creating a filtered list divided by a number (for 10%, 20% etc.) </h3> <h3 id="query-for-cell-content"> <a href="#query-for-cell-content" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Query for cell content </h3> <ul> <li><code class="language-plaintext highlighter-rouge">=QUERY( C1:C, "Select C Where C contains 'f01r01_pm.wav' " )</code> <ul> <li>Syntax = ([range], “Select [column in range] Where [same column in range] contains ‘[string]’ ” )</li> </ul> </li> </ul> <h2 id="working-with-tars"> <a href="#working-with-tars" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Working with tars </h2> <p>For many years, the standard PAMI workflow was to tar (create a <em>(t)ape (ar)chive</em>, or “tarball”) any complexly structured AMI deliverables. Typically, this was used for born digital original documentation, and by creating a singular file (with a .tar extension) that could stand in for multiple files and directories, we were able to achieve certain measure of control, consistency, and ease of movement/storage. The tar manual (<code class="language-plaintext highlighter-rouge">man tar</code>) offers a full list of options/flags, but here are some helpful commands:</p> <h3 id="creating-tars"> <a href="#creating-tars" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Creating tars </h3> <p>To create a tarball without compression:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tar -cvf mytar.tar input_directory
</code></pre></div></div> <p>To create a tarball with gzip compression:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tar -czvf mytar.tar input_directory
</code></pre></div></div> <p>The <code class="language-plaintext highlighter-rouge">-c</code> flag specifies the creation of a tar, <code class="language-plaintext highlighter-rouge">-v</code> the verbose output printed to your terminal window, <code class="language-plaintext highlighter-rouge">-z</code> the gzip compression, and <code class="language-plaintext highlighter-rouge">-f</code> the specified file that will be written to or read from.</p> <h3 id="examining-tars"> <a href="#examining-tars" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Examining tars </h3> <p>To get a list of all files and directories within a tar (with permissions and file sizes):</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tar -tvf mytar.tar
</code></pre></div></div> <p>Without permissions and file sizes:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tar -tf mytar.tar
</code></pre></div></div> <p>To list all files (but not directories):</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tar -tvf --exclude=".*" mytar.tar
</code></pre></div></div> <p>Batching (output to csv):</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find ExcelBornDigital/ -name '*.tar' -exec tar -tzf {} --exclude=".*" ';' &gt; /Users/pamiaudio/Desktop/ICA_borndigital.csv
</code></pre></div></div> <h3 id="extracting-files-from-tars"> <a href="#extracting-files-from-tars" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Extracting files from tars </h3> <p>To extract a file from a tar:</p> <p><code class="language-plaintext highlighter-rouge">cd</code> into the directory in which you’d like to copy the file, and</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tar -xvf mytar.tar myfile.ext
</code></pre></div></div> <p>Some things to note:</p> <ul> <li>The tar will still be intact; the file will simply be copied to your chosen location</li> <li>You’ll need the full file path (which you can get by using the -tf command)</li> <li>Tar is picky about spaces, so you may need to transform something like this: <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Volumes/lpa/Working Storage/Transfer/2 - Ready for Finishing/zUnprocessedOrigidocsDAN/myd_mgzidvd57093_v01/Capture Scratch/Alvin Ailey 2012/CAM A4.mov
</code></pre></div> </div> </li> <li>To something like this: <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Volumes/lpa/Working\ Storage/Transfer/2\ -\ Ready\ for\ Finishing/zUnprocessedOrigidocsDAN/myd_mgzidvd57093_v01/Capture\ Scratch/Alvin\ Ailey 2012/CAM\ A4.mov
</code></pre></div> </div> </li> </ul> </div> </div> </div> </div> </body> </html>
